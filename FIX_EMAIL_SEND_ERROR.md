# р╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓ "Error sending confirmation email" (500 Error)

## ЁЯФН р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ъ

```
AuthApiError: Error sending confirmation email
Status: 500 (Internal Server Error)
```

## ЁЯУЭ р╕кр╕▓р╣Ар╕лр╕Хр╕╕

Supabase р╕Юр╕вр╕▓р╕вр╕▓р╕бр╕кр╣Ир╕З email confirmation р╣Бр╕Хр╣Ир╕ер╣Йр╕бр╣Ар╕лр╕ер╕з р╕нр╕▓р╕Ир╣Ар╕Бр╕┤р╕Фр╕Ир╕▓р╕Б:
1. **SMTP Settings р╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З** - р╕Вр╣Йр╕нр╕бр╕╣р╕е SMTP р╕Чр╕╡р╣Ир╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
2. **Email Verification р╣Ар╕Ыр╕┤р╕Фр╕нр╕вр╕╣р╣И** - р╣Бр╕Хр╣И SMTP р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ
3. **Resend API Key р╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З** - API Key р╕Чр╕╡р╣Ир╣Гр╕кр╣Ир╕Ьр╕┤р╕Фр╕лр╕гр╕╖р╕нр╕лр╕бр╕Фр╕нр╕▓р╕вр╕╕
4. **Sender Email р╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З** - Email р╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╣Др╕бр╣И verify р╕лр╕гр╕╖р╕нр╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З

## тЬЕ р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Йр╣Др╕В

### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 1: р╕Ыр╕┤р╕Ф Email Verification (р╣Ар╕гр╣Зр╕зр╕Чр╕╡р╣Ир╕кр╕╕р╕Ф) тнР

**р╣Гр╕Щ Supabase Dashboard:**
1. р╣Др╕Ыр╕Чр╕╡р╣И **Authentication** тЖТ **Settings**
2. р╕лр╕▓ **"Enable email confirmations"** р╕лр╕гр╕╖р╕н **"Confirm email"**
3. **р╕Ыр╕┤р╕Ф toggle** р╕лр╕гр╕╖р╕н **uncheck**
4. **Save**

**р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М:**
- тЬЕ р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡р╣Вр╕Фр╕вр╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕╡р╣Ар╕бр╕е
- тЬЕ р╣Др╕бр╣Ир╕бр╕╡ error "Error sending confirmation email"
- тЪая╕П р╕ер╕Фр╕Др╕зр╕▓р╕бр╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в (р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Гр╕Кр╣Й email р╕Ыр╕ер╕нр╕бр╣Др╕Фр╣Й)

### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 2: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Бр╕ер╕░р╣Бр╕Бр╣Йр╣Др╕В SMTP Settings

**р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Щ Supabase Dashboard тЖТ Authentication тЖТ SMTP Settings:**

1. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ "Enable custom SMTP" р╣Ар╕Ыр╕┤р╕Фр╕нр╕вр╕╣р╣И**
2. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕е SMTP:**
   - Host: `smtp.resend.com` (р╕Цр╣Йр╕▓р╣Гр╕Кр╣Й Resend)
   - Port: `587` (р╣Др╕бр╣Ир╣Гр╕Кр╣И 465)
   - Username: `resend` (р╕Хр╕▒р╕зр╕Юр╕┤р╕бр╕Юр╣Мр╣Ар╕ер╣Зр╕Б)
   - Password: [Resend API Key] (р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ copy р╕бр╕▓р╣Ар╕Хр╣Зр╕б)
   - Sender email: `onboarding@resend.dev` (р╣Гр╕Кр╣Йр╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕з)

3. **р╕Чр╕Фр╕кр╕нр╕Ър╕кр╣Ир╕З Email:**
   - р╣Гр╕Щ Supabase Dashboard р╕бр╕╡р╕Ыр╕╕р╣Ир╕б "Test email" р╕лр╕гр╕╖р╕н "Send test email"
   - р╕ер╕нр╕Зр╕кр╣Ир╕З test email р╕Фр╕╣р╕зр╣Ир╕▓р╕кр╣Ир╕Зр╣Др╕Фр╣Йр╕лр╕гр╕╖р╕нр╣Др╕бр╣И

### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 3: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Resend Dashboard

**р╕Цр╣Йр╕▓р╣Гр╕Кр╣Й Resend:**
1. р╣Др╕Ыр╕Чр╕╡р╣И https://resend.com тЖТ Dashboard
2. р╕Фр╕╣ **Logs** р╕лр╕гр╕╖р╕н **Emails**
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡ error р╕лр╕гр╕╖р╕нр╣Др╕бр╣И
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ API Key р╕вр╕▒р╕Зр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕лр╕гр╕╖р╕нр╣Др╕бр╣И

### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 4: р╕кр╕гр╣Йр╕▓р╕З Resend API Key р╣Гр╕лр╕бр╣И

**р╕Цр╣Йр╕▓ API Key р╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ:**
1. р╣Др╕Ыр╕Чр╕╡р╣И Resend Dashboard тЖТ API Keys
2. р╕кр╕гр╣Йр╕▓р╕З API Key р╣Гр╕лр╕бр╣И
3. Copy API Key р╣Гр╕лр╕бр╣И
4. р╣Др╕Ыр╕Чр╕╡р╣И Supabase тЖТ SMTP Settings
5. р╣Гр╕кр╣И API Key р╣Гр╕лр╕бр╣Ир╣Гр╕Щ Password field
6. Save

## ЁЯзк р╕Чр╕Фр╕кр╕нр╕Ър╕лр╕ер╕▒р╕Зр╣Бр╕Бр╣Йр╣Др╕В

1. **р╕ер╕нр╕Зр╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Гр╕лр╕бр╣И**
2. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Browser Console:**
   - р╣Др╕бр╣Ир╕бр╕╡ error 500
   - р╣Др╕бр╣Ир╕бр╕╡ "Error sending confirmation email"
3. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓:**
   - р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╕кр╕│р╣Ар╕гр╣Зр╕И
   - Login р╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡ (р╕Цр╣Йр╕▓р╕Ыр╕┤р╕Ф email verification)

## ЁЯУЛ Checklist

- [ ] р╕Ыр╕┤р╕Ф Email Verification р╣Гр╕Щ Supabase Dashboard (р╕Цр╣Йр╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Ар╕гр╣Зр╕з)
- [ ] р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ SMTP Settings р╕зр╣Ир╕▓р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- [ ] р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Resend API Key р╕зр╣Ир╕▓р╕вр╕▒р╕Зр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Й
- [ ] р╕Чр╕Фр╕кр╕нр╕Ър╕кр╣Ир╕З test email р╣Гр╕Щ Supabase Dashboard
- [ ] р╕Чр╕Фр╕кр╕нр╕Ър╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Гр╕лр╕бр╣И
- [ ] р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Browser Console р╕зр╣Ир╕▓р╣Др╕бр╣Ир╕бр╕╡ error

## ЁЯЖШ р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Й

1. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Resend Dashboard** - р╕Фр╕╣ logs р╣Бр╕ер╕░ errors
2. **р╕ер╕нр╕Зр╣Гр╕Кр╣Й Email Provider р╕нр╕╖р╣Ир╕Щ** - р╣Ар╕Кр╣Ир╕Щ SendGrid, AWS SES
3. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Supabase Status** - р╕Фр╕╣р╕зр╣Ир╕▓ Supabase р╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓р╣Др╕лр╕б
4. **р╕Хр╕┤р╕Фр╕Хр╣Ир╕н Support** - Supabase Support р╕лр╕гр╕╖р╕н Resend Support

## ЁЯТб р╕Др╕│р╣Бр╕Щр╕░р╕Щр╕│

- **р╣Гр╕Кр╣Йр╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 1 (р╕Ыр╕┤р╕Ф Email Verification)** р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Бр╕ер╕░р╕Юр╕▒р╕Тр╕Щр╕▓
- **р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ SMTP р╣Гр╕лр╣Йр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З** р╕Бр╣Ир╕нр╕Щр╣Ар╕Ыр╕┤р╕Ф Email Verification р╕Бр╕ер╕▒р╕Ър╕бр╕▓
- **р╣Гр╕Кр╣Й Resend** р╣Ар╕Юр╕гр╕▓р╕░р╕Хр╕▒р╣Йр╕Зр╕Зр╣Ир╕▓р╕вр╣Бр╕ер╕░р╕Яр╕гр╕╡ 3,000 emails/р╣Ар╕Фр╕╖р╕нр╕Щ
